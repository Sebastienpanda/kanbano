<section class="py-24 bg-base-200" id="faq">

  <div class="container">
    <div class="text-center max-w-3xl mx-auto mb-16 space-y-4">
      <div class="inline-block px-4 py-2 rounded-full bg-info/10 text-info text-sm font-semibold">
        Questions fréquentes
      </div>
      <h2 class="text-4xl md:text-5xl font-bold">
        Vous avez des questions ?
        <span class="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                    On a les réponses
                </span>
      </h2>
      <p class="text-lg text-base-content/70">
        Tout ce que vous devez savoir sur FlowBoard
      </p>
    </div>

    <div class="max-w-4xl mx-auto space-y-4">
      @for (faq of faqs(); track faq.question; let i = $index) {
        <div
          [style.animation-delay]="(i * 80) + 'ms'"
          class="group animate-fade-in-up "
        >
          <div
            [class]="isOpen(i)
                            ? 'border-primary shadow-xl shadow-primary/10'
                            : 'border-base-300 hover:border-primary/30 hover:shadow-lg'"
            class="relative rounded-2xl bg-base-100 border-2 transition duration-350 ease-in-out "
          >
            <button
              (click)="toggle(i)"
              class="w-full text-left p-6 flex items-center justify-between gap-4 group/btn cursor-pointer"
              [attr.aria-expanded]="isOpen(i)"
              [attr.aria-controls]="'faq-answer-' + i"
              [attr.id]="'faq-question-' + i"
            >
                            <span
                              [class]="isOpen(i) ? 'text-primary' : 'text-base-content group-hover/btn:text-primary'"
                              class="font-semibold text-lg pr-4 transition-colors">
                                {{ faq.question }}
                            </span>
              <div
                [class]="isOpen(i)
                                     ? 'bg-primary text-primary-content rotate-180'
                                     : 'bg-base-200 group-hover/btn:bg-primary/10 group-hover/btn:text-primary'"
                class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition duration-350 ease-in-out">
                <svg class="size-5 transition-transform duration-350 ease-in-out" fill="none" stroke="currentColor"
                     viewBox="0 0 24 24">
                  <path d="M19 9l-7 7-7-7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" />
                </svg>
              </div>
            </button>

            <div
              [style.max-height]="isOpen(i) ? '500px' : '0px'"
              [style.opacity]="isOpen(i) ? '1' : '0'"
              class="overflow-hidden transition duration-350 ease-in-out"
              [attr.id]="'faq-answer-' + i"
              [attr.aria-labelledby]="'faq-question-' + i"
              role="region"
            >
              <div class="px-6 pb-6 pt-2">
                <div class="text-base-content/70 leading-relaxed pl-2 border-l-4 border-primary/20">
                  {{ faq.answer }}
                </div>
              </div>
            </div>
          </div>
        </div>
      }
    </div>

    <div class="text-center mt-16">
      <div class="inline-block p-8 rounded-2xl bg-base-100 border border-base-300 shadow-xl">
        <div class="space-y-4">
          <h3 class="text-2xl font-bold">Vous avez encore des questions ?</h3>
          <p class="text-base-content/60 max-w-md mx-auto">
            Notre équipe est là pour vous aider. On répond généralement en moins de 2 heures.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center pt-4">
            <button class="btn btn-primary group" aria-label="Nous contacter par email">
              <svg class="size-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  stroke-linecap="round" stroke-linejoin="round"
                  stroke-width="2" />
              </svg>
              Nous contacter
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
